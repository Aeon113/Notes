## 2018-08-28
对sysfs中的节点的一次读写操作最多值允许传递4096bytes的数据
***
在sysfs中，所有数据均以`kobject`或`kset`者两种数据结构表示:   
+ `kobject`: 在 Linux 设备模型中最基本的对象，它的功能是提供引用计数和维持父子(parent)结构、平级(sibling)目录关系， `device`, `device_driver` 等各对象都是以 kobject 基础功能之上实现的:
``` c
struct kobject {
    const char              *name;
    struct list_head        entry;
    struct kobject          *parent;
    struct kset             *kset;
    struct kobj_type        *ktype;
    struct sysfs_dirent     *sd;
    struct kref             kref;
    unsigned int state_initialized:1;
    unsigned int state_in_sysfs:1;
    unsigned int state_add_uevent_sent:1;
    unsigned int state_remove_uevent_sent:1;
};
```
其中 struct kref 内含一个 atomic_t 类型用于引用计数， parent 是单个指向父节点的指针， entry 用于父 kset 以链表头结构将 kobject 结构维护成双向链表；

+ `kset`: kset: 它用来对同类型对象提供一个包装集合，在内核数据结构上它也是由内嵌一个 `kboject` 实现，因而它同时也是一个 `kobject` (面向对象 OOP 概念中的继承关系) ，具有 `kobject` 的全部功能；
``` c
struct kset {
        struct list_head list;
        spinlock_t list_lock;
        struct kobject kobj;
        struct kset_uevent_ops *uevent_ops;
};
```
其中的 struct list_head list 用于将集合中的 kobject 按 struct list_head entry 维护成双向链表；
***
